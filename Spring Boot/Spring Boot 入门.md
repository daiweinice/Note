# Spring Bootå…¥é—¨

## ä¸€ã€ Spring Bootç®€ä»‹

> Spring Bootæ˜¯Springå›¢é˜Ÿå¼€å‘çš„å…¨æ–°æ¡†æ¶. å…¶è®¾è®¡ç›®çš„æ˜¯ç”¨æ¥ç®€åŒ–Springåº”ç”¨çš„åˆå§‹æ­å»ºä»¥åŠå¼€å‘è¿‡ç¨‹ã€‚è¯¥æ¡†æ¶ä½¿ç”¨äº†ç‰¹å®šçš„æ–¹å¼æ¥è¿›è¡Œé…ç½®ï¼Œä»è€Œä½¿å¼€å‘äººå‘˜ä¸å†éœ€è¦å®šä¹‰æ ·æ¿åŒ–çš„é…ç½®(çº¦å®š > é…ç½®)ã€‚Spring Bootæ˜¯æ•´ä¸ªSpringæŠ€æœ¯æ ˆçš„å¤§æ•´åˆ, ä¹Ÿæ˜¯J2EEå¼€å‘çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ.

#### Spring Bootçš„ä¼˜ç‚¹:

+ ä½¿ç”¨ Spring é¡¹ç›®å¼•å¯¼é¡µé¢å¯ä»¥åœ¨å‡ ç§’æ„å»ºä¸€ä¸ªé¡¹ç›®
+ æ–¹ä¾¿å¯¹å¤–è¾“å‡ºå„ç§å½¢å¼çš„æœåŠ¡ï¼Œå¦‚ REST APIã€WebSocketã€Webã€Streamingã€Tasks
+ éå¸¸ç®€æ´çš„å®‰å…¨ç­–ç•¥é›†æˆ
+ æ”¯æŒå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“
+ æ”¯æŒè¿è¡ŒæœŸå†…åµŒå®¹å™¨ï¼Œå¦‚ Tomcatã€Jetty
+ å¼ºå¤§çš„å¼€å‘åŒ…ï¼Œæ”¯æŒçƒ­å¯åŠ¨
+ è‡ªåŠ¨ç®¡ç†ä¾èµ–
+ è‡ªå¸¦åº”ç”¨ç›‘æ§
+ æ”¯æŒå„ç§ IEDï¼Œå¦‚ IntelliJ IDEA ã€NetBeans

#### Spring Bootçš„ç¼ºç‚¹:

+ é›†æˆåº¦è¾ƒé«˜, ä¸æ˜“äº†è§£åº•å±‚åŸç†. å…¥é—¨å®¹æ˜“, ç²¾é€šéš¾



## äºŒã€å¾®æœåŠ¡ç®€ä»‹

> å¾®æœåŠ¡æ˜¯ä¸€ç§æ¶æ„é£æ ¼. ä»¥å‰æˆ‘ä»¬çš„åº”ç”¨æ¶æ„éƒ½æ˜¯å•ä½“é£æ ¼, ä¸€ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªæ•´ä½“, é‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„åŠŸèƒ½æ¨¡å—, éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šä¹Ÿæ˜¯ä»¥æ•´ä¸ªåº”ç”¨ä¸ºå•ä½. è€Œå¾®æœåŠ¡æ¶æ„, å°†ä¸€ä¸ªåº”ç”¨åˆ†æˆä¸€ç»„ç»„å°å‹æœåŠ¡, æ¯ä¸€ä¸ªæœåŠ¡å¯¹åº”ä¸€ç§åŠŸèƒ½, éƒ¨ç½²åœ¨æœåŠ¡å™¨ä»¥ä¸€ç»„æœåŠ¡ä¸ºå•ä½, æœåŠ¡ä¸æœåŠ¡ä¹‹é—´é€šè¿‡HTTPè¿›è¡Œäº¤äº’.

#### å¾®æœåŠ¡çš„ä¼˜ç‚¹:

+ æœ‰æ•ˆåˆ©ç”¨è®¡ç®—æœºèµ„æº. ä»¥å‰çš„æœåŠ¡å™¨é…ç½®æ˜¯ä»¥åº”ç”¨ä¸ºå•ä½, å¦‚æœæŸé¡¹æœåŠ¡éœ€è¦é¢å¤–çš„æœåŠ¡å™¨èµ„æº, åˆ™éœ€è¦æŠŠæ•´ä¸ªåº”ç”¨éƒ¨ç½²åœ¨æ–°çš„æœåŠ¡å™¨ä¸Š. è€Œå¾®æœåŠ¡æ¶æ„çš„æœåŠ¡å™¨é…ç½®ä»¥ä¸€ç»„æœåŠ¡ä¸ºå•ä½, å¯ä»¥æ ¹æ®å„æœåŠ¡çš„èµ„æºéœ€æ±‚é‡æŒ‰éœ€åˆ†é….
+ æ˜“äºé¡¹ç›®ç»´æŠ¤. å¼€å‘è€…å¯ä»¥æ›´æ–°åº”ç”¨ç¨‹åºçš„å•ä¸ªæœåŠ¡ç»„ä»¶ï¼Œè€Œä¸ä¼šå½±å“å…¶ä»–çš„éƒ¨åˆ†.
+ æœ‰åŠ©äºæ–°å…´çš„äº‘æœåŠ¡, å¦‚äº‹ä»¶é©±åŠ¨è®¡ç®—. ç±»ä¼¼AWS Lambdaè¿™æ ·çš„åŠŸèƒ½è®©å¼€å‘äººå‘˜èƒ½å¤Ÿç¼–å†™ä»£ç å¤„äºä¼‘çœ çŠ¶æ€, ç›´åˆ°åº”ç”¨ç¨‹åºäº‹ä»¶è§¦å‘. äº‹ä»¶å¤„ç†æ—¶æ‰éœ€è¦ä½¿ç”¨è®¡ç®—èµ„æº, è€Œä¼ä¸šåªéœ€è¦ä¸ºæ¯æ¬¡äº‹ä»¶ï¼Œè€Œä¸æ˜¯å›ºå®šæ•°ç›®çš„è®¡ç®—å®ä¾‹æ”¯ä»˜.

#### å¾®æœåŠ¡çš„ç¼ºç‚¹:

+ å› ä¸ºå„æœåŠ¡ç»„ä»¶éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨, ä½¿å¾—è¿ç»´éš¾åº¦å¢åŠ .



## ä¸‰ã€Spring Bootå…¥é—¨æ¡ˆä¾‹

> æ¡ˆä¾‹è¯´æ˜: åˆ›å»ºä¸€ä¸ªWebåº”ç”¨, å‰ç«¯å‘å‡º/helloè¯·æ±‚, åç«¯å¤„ç†, è¿”å›hello world

#### 1. åˆ›å»ºMavenå·¥ç¨‹

#### 2. å¯¼å…¥ç›¸å…³ä¾èµ–

````xml
<parent>
	<groupId>org.springframework.boot</groupId>
	<artifactId>spring-boot-starter-parent</artifactId>
	<version>1.5.9.RELEASE</version>
</parent>
<dependencies>
	<dependency>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-starter-web</artifactId>
	</dependency>
</dependencies>
````

#### 3. ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åº, å¯åŠ¨Spring Bootåº”ç”¨

```java
/**
 *  @SpringBootApplication æ³¨è§£åœ¨ä¸»ç¨‹åºç±»ä¸Š, è¯´æ˜è¿™æ˜¯ä¸€ä¸ªSpring Bootåº”ç”¨
 */
@SpringBootApplication
public class MainApplication {

    public static void main(String[] args) {

        // Springåº”ç”¨å¯åŠ¨èµ·æ¥
        SpringApplication.run(MainApplication.class,args);
    }
}
```

#### 4. ç¼–å†™åç«¯Controller

````java
@Controller
public class Controller {

    @ResponseBody
    @RequestMapping("/hello")
    public String hello(){
        return "Hello World";
    }
}
````

#### 5. è¿è¡Œmainæ–¹æ³•

è¿è¡Œç»“æœ: å‘å‡º/helloè¯·æ±‚, é¡µé¢æ˜¾ç¤ºHello World

#### 6. éƒ¨ç½²

````xml
<build>
	<plugins>
		<plugin>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-maven-plugin</artifactId>
		</plugin>
	</plugins>
</build>
````

åœ¨Mavenä¸­å¯¼å…¥ä¸Šè¿°æ’ä»¶, é€šè¿‡Mavençš„-packageå‘½ä»¤å°†è¯¥é¡¹ç›®æ‰“åŒ…æˆjaråŒ…. æ‰¾åˆ°è¯¥jaråŒ…, åœ¨å‘½ä»¤è¡Œä¸­é€šè¿‡java -jar xxx.jarå‘½ä»¤å³å¯éƒ¨ç½²æˆåŠŸ.



## å››ã€å…¥é—¨æ¡ˆä¾‹å®ç°åŸç†åˆ†æ

#### 1. pom.xmlæ¢ç©¶

````xml
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>1.5.9.RELEASE</version>
</parent>

ğŸ‘†æˆ‘ä»¬çš„é¡¹ç›®ä¾èµ–äº†ä¸€ä¸ªSpring Bootä¸ºæˆ‘ä»¬æä¾›çš„çˆ¶é¡¹ç›®, è€Œè¯¥çˆ¶é¡¹ç›®åˆä¾èµ–äºä¸€ä¸ªçˆ¶é¡¹ç›®ğŸ‘‡

<parent>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-dependencies</artifactId>
  <version>1.5.9.RELEASE</version>
  <relativePath>../../spring-boot-dependencies</relativePath>
</parent>

ğŸ‘†è¯¥é¡¹ç›®ä¸ºä¾èµ–ç‰ˆæœ¬ä»²è£ä¸­å¿ƒ, ç”¨æ¥ç®¡ç†Spring Bootåº”ç”¨é‡Œé¢æ‰€æœ‰ä¾èµ–çš„ç‰ˆæœ¬.
æˆ‘ä»¬åœ¨å¯¼å…¥ç›¸å…³ä¾èµ–æ—¶, æ— éœ€å†å†™ç‰ˆæœ¬ä¿¡æ¯(å¦‚æœä»²è£ä¸­å¿ƒæ²¡æœ‰çš„ä¾èµ–è¿˜æ˜¯éœ€è¦å†™ç‰ˆæœ¬ä¿¡æ¯)
````

````xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>

spring-boot-starter: åœºæ™¯å¯åŠ¨å™¨, Spring BootæŠŠæ‰€æœ‰åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–æˆäº†ä¸€ä¸ªä¸ªåœºæ™¯å¯åŠ¨å™¨
-web: è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªwebåœºæ™¯å¯åŠ¨å™¨
æ ¹æ®ä¸åŒåœºæ™¯,æˆ‘ä»¬åªéœ€è¦å¯¼å…¥ç›¸å…³åœºæ™¯å¯åŠ¨å™¨, è¯¥åœºæ™¯éœ€è¦çš„ä¾èµ–éƒ½åœ¨åœºæ™¯å¯åŠ¨å™¨ä¸­ä¸ºæˆ‘ä»¬å¯¼å…¥äº†, æˆ‘ä»¬ä¸éœ€è¦è‡ªå·±å†å»å¯¼å…¥ç›¸å…³ä¾èµ–
````

#### 2. ä¸»ç¨‹åº

````java
@SpringBootApplication
public class HelloWorldMainApplication
````

**@SprigBootApplication** è¡¨ç¤ºè¯¥ç±»æ˜¯ä¸€ä¸ªä¸»ç¨‹åºç±», Spring Booté€šè¿‡è°ƒç”¨è¯¥ç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨Spring Booté¡¹ç›®. è¯¥æ³¨è§£å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ³¨è§£ç»„åˆğŸ‘‡

````java
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration
@EnableAutoConfiguration
@ComponentScan(excludeFilters = {
      @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),
      @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })
public @interface SpringBootApplication {
````

**@SpringBootConfiguration** Spring Booté…ç½®ç±»

å…¶å†…éƒ¨æ˜¯æ³¨è§£**@Configuration**, é…ç½®ç±»ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶



**@EnableAutoConfiguration** å¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½

````java
@AutoConfigurationPackage
@Import(EnableAutoConfigurationImportSelector.class)
public @interface EnableAutoConfiguration {
````

|__**@AutoConfigurationPackage** è‡ªåŠ¨é…ç½®åŒ…

â€‹		|__**@Import(AutoConfigurationPackages.Registrar.class)** å¯¼å…¥ç»„ä»¶

==è¯¥ç»„ä»¶å°†ä¸»ç¨‹åºç±»(@SpringBootApplication)æ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…ä¸­æ‰€æœ‰çš„ç»„ä»¶æ·»åŠ åˆ°Springå®¹å™¨ä¸­==

|__**@Import(EnableAutoConfigurationImportSelector.class)** å¯¼å…¥ç»„ä»¶é€‰æ‹©å™¨

è¯¥é€‰æ‹©å™¨å°†æ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶(å„æ¡†æ¶çš„ç»„ä»¶)ä»¥å…¨ç±»åçš„æ–¹å¼è¿”å›, å¹¶æ³¨å…¥å®¹å™¨ä¸­. è¿™äº›ç»„ä»¶éƒ½æ˜¯ä¸å¯¹åº”åœºæ™¯ç›¸å…³çš„è‡ªåŠ¨é…ç½®ç»„ä»¶(xxxAutoConfiguration.class), è¿™äº›ç»„ä»¶åˆä¼šå°†åœºæ™¯æ‰€éœ€çš„å„ç§å¯¹è±¡æ·»åŠ åˆ°å®¹å™¨ä¸­, æ‰€ä»¥æˆ‘ä»¬æ— éœ€å†æ‰‹åŠ¨æ·»åŠ ç›¸å…³å¯¹è±¡è¿›å®¹å™¨.ç»„ä»¶é€‰æ‹©å™¨çš„å®ç°åŸç†æ˜¯ğŸ‘‡

`SpringFactoriesLoader.loadFactoryNames(EnableAutoConfiguration.class,classLoader)`

Spring Bootåœ¨å¯åŠ¨çš„æ—¶å€™ä»å„ä¾èµ–çš„META-INF/spring.factoriesä¸­è·å–EnableAutoConfigurationæŒ‡å®šçš„å€¼ï¼Œå°†è¿™äº›å€¼ä»£è¡¨çš„è‡ªåŠ¨é…ç½®ç±»ç»„ä»¶å¯¼å…¥åˆ°å®¹å™¨ä¸­ï¼Œè‡ªåŠ¨é…ç½®ç»„ä»¶å°±ç”Ÿæ•ˆï¼Œå¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œ.

J2EEçš„æ•´ä½“æ•´åˆè§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨`spring-boot-autoconfigure.jar`ä¸­, é‡Œé¢å°±æ˜¯å„ç§xxxAutoConfiguration.class

![image-20200722090537398](images/%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90)



## äº”ã€é€šè¿‡IDEAå¿«é€Ÿåˆ›å»ºSpring Booté¡¹ç›®

æ–°å»ºé¡¹ç›®->é€‰æ‹©Spring Initializer->é€‰æ‹©éœ€è¦çš„åœºæ™¯å¯åŠ¨å™¨

resourcesç›®å½•ç»“æ„

+ static: ä¿å­˜æ‰€æœ‰çš„é™æ€èµ„æº, å¦‚ js css  images
+ templates: ä¿å­˜æ‰€æœ‰çš„æ¨¡æ¿é¡µé¢(Spring Booté»˜è®¤jaråŒ…ä½¿ç”¨åµŒå…¥å¼çš„Tomcat, é»˜è®¤ä¸æ”¯æŒJSPé¡µé¢)å¯ä»¥ä½¿ç”¨æ¨¡æ¿å¼•æ“(freemarkerã€thymeleaf)
+ application.properties: Spring Bootåº”ç”¨çš„é…ç½®æ–‡ä»¶, å¯ä»¥ä¿®æ”¹ä¸€äº›é»˜è®¤è®¾ç½®

